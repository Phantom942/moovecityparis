<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test du site Moove City</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-item {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        .test-item.error {
            border-left-color: #f44336;
        }
        .test-item.warning {
            border-left-color: #ff9800;
        }
        h1 {
            color: #333;
        }
        .status {
            font-weight: bold;
            margin-left: 10px;
        }
        .ok { color: #4CAF50; }
        .fail { color: #f44336; }
        .warn { color: #ff9800; }
    </style>
</head>
<body>
    <h1>üîç Diagnostic du site Moove City</h1>
    
    <div class="test-item">
        <strong>1. Fichier index.html</strong>
        <span class="status ok" id="test-index">‚úÖ Pr√©sent</span>
    </div>

    <div class="test-item">
        <strong>2. Formulaire de contact</strong>
        <span class="status" id="test-form">‚è≥ Test en cours...</span>
    </div>

    <div class="test-item">
        <strong>3. Email FormSubmit</strong>
        <span class="status" id="test-email">‚è≥ Test en cours...</span>
    </div>

    <div class="test-item">
        <strong>4. Google Maps API</strong>
        <span class="status" id="test-maps">‚è≥ Test en cours...</span>
    </div>

    <div class="test-item">
        <strong>5. Google Analytics</strong>
        <span class="status" id="test-analytics">‚è≥ Test en cours...</span>
    </div>

    <div class="test-item">
        <strong>6. Images</strong>
        <span class="status" id="test-images">‚è≥ Test en cours...</span>
    </div>

    <div class="test-item">
        <strong>7. JavaScript</strong>
        <span class="status" id="test-js">‚è≥ Test en cours...</span>
    </div>

    <script>
        // Test 1: index.html
        fetch('index.html')
            .then(r => r.ok ? document.getElementById('test-index').textContent = '‚úÖ Pr√©sent' : document.getElementById('test-index').textContent = '‚ùå Absent')
            .catch(() => document.getElementById('test-index').textContent = '‚ùå Erreur');

        // Test 2: Formulaire
        fetch('index.html')
            .then(r => r.text())
            .then(html => {
                const hasForm = html.includes('formsubmit.co') && html.includes('contact@moovecity.fr');
                document.getElementById('test-form').textContent = hasForm ? '‚úÖ Configur√©' : '‚ùå Probl√®me';
                document.getElementById('test-form').className = hasForm ? 'status ok' : 'status fail';
            });

        // Test 3: Email
        fetch('index.html')
            .then(r => r.text())
            .then(html => {
                const hasEmail = html.includes('contact@moovecity.fr');
                const hasWrongEmail = html.includes('contact@moovecityparis.fr');
                if (hasWrongEmail) {
                    document.getElementById('test-email').textContent = '‚ö†Ô∏è Ancienne adresse trouv√©e';
                    document.getElementById('test-email').className = 'status warn';
                } else if (hasEmail) {
                    document.getElementById('test-email').textContent = '‚úÖ Adresse correcte';
                    document.getElementById('test-email').className = 'status ok';
                } else {
                    document.getElementById('test-email').textContent = '‚ùå Email manquant';
                    document.getElementById('test-email').className = 'status fail';
                }
            });

        // Test 4: Google Maps
        fetch('index.html')
            .then(r => r.text())
            .then(html => {
                const hasMaps = html.includes('maps.googleapis.com');
                document.getElementById('test-maps').textContent = hasMaps ? '‚úÖ API pr√©sente' : '‚ùå API absente';
                document.getElementById('test-maps').className = hasMaps ? 'status ok' : 'status fail';
            });

        // Test 5: Google Analytics
        fetch('index.html')
            .then(r => r.text())
            .then(html => {
                const hasGA = html.includes('G-WC9EEBKP2E') || html.includes('gtag');
                document.getElementById('test-analytics').textContent = hasGA ? '‚úÖ Configur√©' : '‚ùå Absent';
                document.getElementById('test-analytics').className = hasGA ? 'status ok' : 'status fail';
            });

        // Test 6: Images
        const images = ['images/hero-moove-city.jpg', 'brand/moove-city-logo.svg'];
        let imagesOk = 0;
        images.forEach(img => {
            fetch(img)
                .then(r => {
                    if (r.ok) imagesOk++;
                    if (imagesOk === images.length) {
                        document.getElementById('test-images').textContent = '‚úÖ Toutes pr√©sentes';
                        document.getElementById('test-images').className = 'status ok';
                    }
                })
                .catch(() => {
                    document.getElementById('test-images').textContent = `‚ö†Ô∏è ${imagesOk}/${images.length} pr√©sentes`;
                    document.getElementById('test-images').className = 'status warn';
                });
        });

        // Test 7: JavaScript
        try {
            if (typeof trackFormSubmission === 'function' || typeof window.trackFormSubmission === 'function') {
                document.getElementById('test-js').textContent = '‚úÖ Fonctions disponibles';
                document.getElementById('test-js').className = 'status ok';
            } else {
                // Charger index.html pour tester
                fetch('index.html')
                    .then(r => r.text())
                    .then(html => {
                        const hasJS = html.includes('trackFormSubmission') && html.includes('trackWhatsAppClick');
                        document.getElementById('test-js').textContent = hasJS ? '‚úÖ Code pr√©sent' : '‚ùå Probl√®me';
                        document.getElementById('test-js').className = hasJS ? 'status ok' : 'status fail';
                    });
            }
        } catch(e) {
            document.getElementById('test-js').textContent = '‚ùå Erreur';
            document.getElementById('test-js').className = 'status fail';
        }
    </script>
</body>
</html>

